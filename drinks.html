<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Assistant</title>

    <!-- Material Symbols -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Enhanced Fonts: Inter, Tangerine (calligraphic), JetBrains Mono, Doto, Major Mono Display -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Tangerine:wght@400;700&family=JetBrains+Mono:wght@400;500;700&family=Doto:wght@100..900&family=Major+Mono+Display&display=swap"
        rel="stylesheet">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <link rel="stylesheet" href="css/style.css?v=7">
    <link rel="stylesheet" href="css/ui-fixes.css">
    <link rel="stylesheet" href="css/mobile-optimizations.css">
    <link rel="stylesheet" href="css/warning-style.css">
    <link rel="stylesheet" href="css/auth-style.css">
</head>

<body>
    <!-- Particle Background Canvas -->
    <canvas id="particle-canvas"></canvas>

    <!-- Cursor Follower (PC) -->
    <div id="cursor-follower"></div>

    <!-- Brand Logo -->
    <div class="brand-logo">ccooffee</div>

    <!-- User Profile / Login -->
    <div id="user-profile" class="user-profile hidden">
        <div class="user-avatar">
            <span id="user-avatar-text">U</span>
        </div>
        <div id="profile-dropdown" class="profile-dropdown hidden">
            <div class="profile-info">
                <div class="profile-name" id="user-display-name">User</div>
                <div class="profile-email" id="user-email">user@example.com</div>
            </div>
            <div class="profile-divider"></div>
            <button class="profile-menu-item" id="level-btn">
                <span class="material-symbols-rounded">military_tech</span>
                Level
            </button>
            <button class="profile-menu-item" id="stats-btn">
                <span class="material-symbols-rounded">bar_chart</span>
                Stats
            </button>
            <button class="profile-menu-item" id="favorites-btn">
                <span class="material-symbols-rounded">favorite</span>
                Favoriten
            </button>
            <button class="profile-menu-item" id="leaderboard-btn">
                <span class="material-symbols-rounded">leaderboard</span>
                Leaderboard
            </button>
            <div class="profile-divider"></div>
            <button class="profile-menu-item" id="logout-btn">
                <span class="material-symbols-rounded">logout</span>
                Abmelden
            </button>
        </div>
    </div>
    <button id="login-btn" class="login-btn">
        <span class="material-symbols-rounded">login</span>
        Anmelden
    </button>

    <!-- Navigation (Top, Fixed, Always Visible) -->
    <nav id="main-nav" class="glass-nav">
        <button class="nav-btn" onclick="window.location.href='explore.html'"><span class="material-symbols-rounded">home</span></button>
        <button class="nav-btn" onclick="window.location.href='brew.html'"><span class="material-symbols-rounded">coffee_maker</span></button>
        <button class="nav-btn active-nav" onclick="window.location.href='drinks.html'"><span class="material-symbols-rounded">menu_book</span></button>
        <button class="nav-btn" onclick="window.location.href='shops.html'"><span class="material-symbols-rounded">storefront</span></button>
        <button class="nav-btn" onclick="window.location.href='dialin.html'"><span class="material-symbols-rounded">tune</span></button>
        <button class="nav-btn" onclick="window.location.href='knowledge.html'"><span class="material-symbols-rounded">school</span></button>
    </nav>
<!-- ROOTS -->

    <main id="app">
        <section id="drinks" class="page active">
            <header class="page-header">
                <h1>RECIPES</h1>
                <button class="fab" onclick="drinkManager.openAddModal()"><span
                        class="material-symbols-rounded">add</span></button>
            </header>

            <!-- Guest Mode Warning -->
            <div class="guest-warning glass-panel hidden">
                <span class="material-symbols-rounded">info</span>
                <p><strong>Gast-Modus:</strong> Deine Einträge werden nur temporär gespeichert.</p>
            </div>
            <div id="drink-list" class="grid-list-container">
                <!-- Pills will be injected here -->
            </div>
        </section>
    </main>

    <!-- MODALS -->
    <div id="drink-modal" class="modal">
        <div class="modal-content glass-panel">
            <span class="close" onclick="drinkManager.closeModal()">&times;</span>
            <h2>New Recipe</h2>
            <form id="drink-form">
                <input type="text" name="drinkName" placeholder="Drink Name" required>
                <textarea name="recipe" placeholder="Recipe Instructions..." rows="5"></textarea>
                <!-- Image input handled technically differently or simplify for now -->
                <button type="submit" class="save-btn">Save Recipe</button>
            </form>
        </div>
    </div>
<!-- Auth Modal (Login/Signup) -->
    <div id="auth-modal" class="modal hidden">
        <div class="modal-content glass-panel">
            <span class="close">&times;</span>
            <h2 id="auth-title">Anmelden</h2>
            <form id="auth-form" data-mode="login">
                <div id="display-name-field" class="hidden">
                    <input type="text" name="display-name" placeholder="Anzeigename">
                </div>
                <input type="email" name="email" placeholder="E-Mail" required>
                <input type="password" name="password" placeholder="Passwort" required minlength="6">
                <div id="auth-error" class="auth-error"></div>
                <button type="submit" id="auth-submit" class="save-btn">Anmelden</button>

                <div class="auth-divider">
                    <span>ODER</span>
                </div>

                <button type="button" id="google-auth-btn" class="google-btn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google Logo">
                    <span>Mit Google anmelden</span>
                </button>
                <div class="auth-switch">
                    <span id="auth-switch-text">Noch kein Konto?</span>
                    <button type="button" id="auth-switch-btn" class="link-btn">Registrieren</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboard-modal" class="modal hidden">
        <div class="modal-content leaderboard-modal-content glass-panel">
            <span class="close" id="leaderboard-modal-close">&times;</span>
            <div class="level-header">
                <span class="material-symbols-rounded level-icon">leaderboard</span>
                <h2>Leaderboard</h2>
            </div>
            <div id="leaderboard-list" class="leaderboard-list">
                <p class="lb-loading">Lade Rangliste…</p>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div id="stats-modal" class="modal hidden">
        <div class="modal-content stats-modal-content glass-panel">
            <span class="close" id="stats-modal-close">&times;</span>
            <div class="level-header">
                <span class="material-symbols-rounded level-icon">bar_chart</span>
                <h2>Deine Stats</h2>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="material-symbols-rounded stat-icon">coffee</span>
                    <span class="stat-value" id="stats-brews">0</span>
                    <span class="stat-label">Brews</span>
                </div>
                <div class="stat-card">
                    <span class="material-symbols-rounded stat-icon">menu_book</span>
                    <span class="stat-value" id="stats-recipes">0</span>
                    <span class="stat-label">Recipes</span>
                </div>
                <div class="stat-card">
                    <span class="material-symbols-rounded stat-icon">storefront</span>
                    <span class="stat-value" id="stats-shops">0</span>
                    <span class="stat-label">Shops</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Favorites Modal -->
    <div id="favorites-modal" class="modal hidden">
        <div class="modal-content favorites-modal-content glass-panel">
            <span class="close" id="favorites-modal-close">&times;</span>
            <div class="level-header">
                <span class="material-symbols-rounded level-icon"
                    style="color: #e74c3c; -webkit-text-fill-color: #e74c3c;">favorite</span>
                <h2
                    style="background: linear-gradient(135deg, #e74c3c, #ff8c69); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip:text;">
                    Favoriten</h2>
            </div>
            <div id="favorites-brew-list" class="favorites-brew-list"></div>
        </div>
    </div>

    <!-- Level Modal -->
    <div id="level-modal" class="modal hidden">
        <div class="modal-content level-modal-content glass-panel">
            <span class="close" id="level-modal-close">&times;</span>
            <div class="level-header">
                <span class="material-symbols-rounded level-icon">military_tech</span>
                <h2 id="level-title">Trainee Barista</h2>
            </div>
            <div class="level-points-display">
                <span class="level-points-label">ccooffee points</span>
                <span class="level-points-value" id="level-points-value">0</span>
            </div>
            <div class="level-progress-section">
                <div class="level-progress-bar-bg">
                    <div class="level-progress-bar-fill" id="level-progress-fill"></div>
                </div>
                <p class="level-next-info" id="level-next-info">Noch 10 Punkte bis zum nächsten Level</p>
            </div>
        </div>
    </div>


    

<script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/auth.js?v=11"></script>
    <script src="js/particle-bg.js"></script>
    <script src="js/app.js?v=11"></script>
</body>

</html>